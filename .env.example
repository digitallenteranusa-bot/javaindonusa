# ==============================================================================
# ISP BILLING SYSTEM - JAVA INDONUSA
# ==============================================================================
# File konfigurasi environment untuk aplikasi billing.
#
# PETUNJUK INSTALASI:
# 1. Copy file ini menjadi .env
# 2. Isi semua value yang diperlukan sesuai environment Anda
# 3. Jalankan: php artisan key:generate
# 4. Jalankan: php artisan migrate --seed
#
# Dokumentasi lengkap: docs/01_INSTALASI.md
# ==============================================================================


# ==============================================================================
# APLIKASI
# ==============================================================================
# Konfigurasi dasar aplikasi Laravel

APP_NAME="ISP Billing - Java Indonusa"
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_TIMEZONE=Asia/Jakarta
APP_URL=http://localhost

# Versi aplikasi (jangan diubah manual)
APP_VERSION=1.0.0

# Locale
APP_LOCALE=id
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=id_ID

# Maintenance mode
APP_MAINTENANCE_DRIVER=file


# ==============================================================================
# DATABASE
# ==============================================================================
# Konfigurasi koneksi MySQL

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=billing_javaindonusa
DB_USERNAME=root
DB_PASSWORD=

# Untuk production, gunakan:
# DB_HOST=localhost
# DB_DATABASE=nama_database
# DB_USERNAME=user_database
# DB_PASSWORD=password_yang_kuat


# ==============================================================================
# REDIS & CACHE
# ==============================================================================
# Redis digunakan untuk cache, session, dan queue

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# Cache
CACHE_STORE=redis
CACHE_PREFIX=billing_

# Session
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# Queue (untuk job async)
QUEUE_CONNECTION=redis
BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local


# ==============================================================================
# LOGGING
# ==============================================================================

LOG_CHANNEL=daily
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# Untuk production:
# LOG_LEVEL=error


# ==============================================================================
# SECURITY
# ==============================================================================

BCRYPT_ROUNDS=12


# ==============================================================================
#                          KONFIGURASI BILLING
# ==============================================================================
# Pengaturan logika bisnis billing

# Tanggal jatuh tempo (hari ke-X setiap bulan)
BILLING_DUE_DAYS=20

# Grace period setelah jatuh tempo (hari)
BILLING_GRACE_DAYS=7

# Minimal bulan tunggakan untuk isolir
BILLING_ISOLATION_MIN_MONTHS=2

# Toleransi bulan untuk pelanggan rapel/cicilan
BILLING_RAPEL_TOLERANCE_MONTHS=3

# Jangan isolir jika baru bayar dalam X hari terakhir
BILLING_RECENT_PAYMENT_DAYS=30


# ==============================================================================
#                          KONFIGURASI MIKROTIK
# ==============================================================================
# Koneksi ke Mikrotik Router untuk manajemen PPPoE dan isolir
#
# CATATAN: Jika aplikasi di cloud, pastikan VPN sudah terhubung ke jaringan
# lokal tempat Mikrotik berada. Lihat: docs/09_VPN_SETUP.md

# ------------------------------------------------------------------------------
# KONEKSI UTAMA
# ------------------------------------------------------------------------------
# IP/hostname Mikrotik (gunakan IP lokal jika via VPN)
MIKROTIK_HOST=192.168.88.1

# Port API RouterOS (default: 8728, SSL: 8729)
MIKROTIK_PORT=8728

# Credentials
MIKROTIK_USER=admin
MIKROTIK_PASS=

# Timeout koneksi (detik)
MIKROTIK_TIMEOUT=10

# Debug mode (true = log semua API call)
MIKROTIK_DEBUG=false

# ------------------------------------------------------------------------------
# KONFIGURASI ISOLIR
# ------------------------------------------------------------------------------
# Metode isolir yang digunakan:
# - address_list : Tambahkan IP ke address list (RECOMMENDED)
# - profile      : Ubah PPP profile ke profile isolir
# - disable      : Disable PPP secret
MIKROTIK_ISOLATION_METHOD=address_list

# Nama address list untuk isolir (jika method = address_list)
MIKROTIK_ISOLATED_ADDRESS_LIST=ISOLIR

# Nama profile untuk isolir (jika method = profile)
MIKROTIK_ISOLATED_PROFILE=ISOLIR

# Disconnect session aktif setelah isolir
MIKROTIK_DISCONNECT_ON_ISOLATE=true

# URL redirect halaman isolir (opsional, untuk walled garden)
MIKROTIK_ISOLATION_REDIRECT_URL=

# Subnet IP pool isolir (untuk auto-detect customer dari IP)
MIKROTIK_ISOLATION_SUBNET=10.144.1.0/24

# ------------------------------------------------------------------------------
# AUTO ISOLIR
# ------------------------------------------------------------------------------
# Aktifkan auto isolir otomatis (via scheduler)
MIKROTIK_AUTO_ISOLATE=true

# Jam eksekusi isolir harian (format: HH:MM)
MIKROTIK_ISOLATION_TIME=08:00

# Jangan isolir pelanggan rapel/cicilan
MIKROTIK_EXCLUDE_RAPEL=true

# ------------------------------------------------------------------------------
# PPPOE SETTINGS
# ------------------------------------------------------------------------------
# PPPoE service name
MIKROTIK_PPPOE_SERVICE=pppoe

# Default profile untuk pelanggan baru
MIKROTIK_DEFAULT_PROFILE=default

# IP pool untuk remote address (opsional)
MIKROTIK_IP_POOL=pppoe-pool

# ------------------------------------------------------------------------------
# QUEUE SETTINGS (Opsional)
# ------------------------------------------------------------------------------
# Gunakan simple queue untuk bandwidth management
MIKROTIK_QUEUE_ENABLED=false
MIKROTIK_QUEUE_PARENT=none


# ==============================================================================
#                          KONFIGURASI GENIEACS (TR-069)
# ==============================================================================
# GenieACS adalah ACS Server open-source untuk manajemen device TR-069 (ONU/ONT)
# Website: https://genieacs.com
#
# CATATAN: Jika aplikasi di cloud, pastikan VPN sudah terhubung ke jaringan
# lokal tempat GenieACS berada. Lihat: docs/09_VPN_SETUP.md

# Aktifkan integrasi GenieACS
GENIEACS_ENABLED=false

# ------------------------------------------------------------------------------
# KONEKSI GENIEACS
# ------------------------------------------------------------------------------
# NBI (Northbound Interface) - REST API untuk query dan task
# Default port: 7557
GENIEACS_NBI_URL=http://localhost:7557

# FS (File Server) - Untuk download firmware ke device
# Default port: 7567
GENIEACS_FS_URL=http://localhost:7567

# Timeout koneksi (detik)
GENIEACS_TIMEOUT=30

# ------------------------------------------------------------------------------
# AUTHENTICATION (Jika diaktifkan di GenieACS)
# ------------------------------------------------------------------------------
GENIEACS_AUTH_ENABLED=false
GENIEACS_USERNAME=
GENIEACS_PASSWORD=

# ------------------------------------------------------------------------------
# SYNC CONFIGURATION
# ------------------------------------------------------------------------------
# Interval sync device dari GenieACS (menit)
GENIEACS_SYNC_INTERVAL=15

# Batch size per sync
GENIEACS_SYNC_BATCH=100

# Device dianggap offline jika tidak ada inform selama X menit
GENIEACS_OFFLINE_THRESHOLD=30


# ==============================================================================
#                          KONFIGURASI NOTIFIKASI
# ==============================================================================
# Pengaturan untuk pengiriman notifikasi WhatsApp, SMS, dan Email

# Channel default untuk notifikasi: whatsapp, sms, atau email
NOTIFICATION_DEFAULT_CHANNEL=whatsapp

# Aktifkan antrian untuk notifikasi (async)
NOTIFICATION_QUEUE_ENABLED=true
NOTIFICATION_QUEUE_CONNECTION=redis
NOTIFICATION_QUEUE_NAME=notifications

# Hanya kirim notifikasi pada jam kerja (08:00 - 17:00)
NOTIFICATION_BUSINESS_HOURS=true

# Logging notifikasi
NOTIFICATION_LOG_ENABLED=true
NOTIFICATION_LOG_CHANNEL=daily
NOTIFICATION_LOG_CONTENT=false

# ------------------------------------------------------------------------------
# WHATSAPP GATEWAY
# ------------------------------------------------------------------------------
# Pilih driver: fonnte, wablas, dripsender, atau custom
# Dokumentasi masing-masing provider ada di bawah

WHATSAPP_ENABLED=false
WHATSAPP_DRIVER=fonnte
WHATSAPP_API_KEY=
WHATSAPP_SENDER=6281234567890

# Rate limiting
WHATSAPP_RATE_LIMIT=30
WHATSAPP_DELAY_MS=100

# --- FONNTE ---
# Daftar: https://fonnte.com
# Harga: Mulai dari Rp 100.000/bulan
# Dokumentasi: https://fonnte.com/api
FONNTE_DEVICE_ID=

# --- WABLAS ---
# Daftar: https://wablas.com
# Dokumentasi: https://wablas.com/documentation
WABLAS_DOMAIN=pati

# ------------------------------------------------------------------------------
# SMS GATEWAY
# ------------------------------------------------------------------------------
# Pilih driver: zenziva, twilio, nexmo, raja_sms, nusasms

SMS_ENABLED=false
SMS_DRIVER=zenziva
SMS_API_KEY=
SMS_USERNAME=
SMS_PASSWORD=
SMS_SENDER=

# --- ZENZIVA ---
# Daftar: https://console.zenziva.net
# Harga: Mulai dari Rp 350/SMS (reguler)
# Type: reguler atau masking
ZENZIVA_TYPE=reguler

# --- TWILIO ---
# Daftar: https://twilio.com
# SMS_USERNAME = Account SID
# SMS_API_KEY = Auth Token

# ------------------------------------------------------------------------------
# EMAIL
# ------------------------------------------------------------------------------
# Konfigurasi SMTP untuk pengiriman email

MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@javaindonusa.com"
MAIL_FROM_NAME="${APP_NAME}"


# ==============================================================================
#                          KONFIGURASI VPN (Opsional)
# ==============================================================================
# Jika aplikasi di-deploy di cloud dan perlu akses ke jaringan lokal
# Lihat dokumentasi lengkap: docs/09_VPN_SETUP.md
#
# VPN tidak dikonfigurasi di sini, melainkan di level sistem operasi.
# Setelah VPN aktif, gunakan IP lokal untuk MIKROTIK_HOST dan GENIEACS_NBI_URL


# ==============================================================================
# VITE (Frontend Build)
# ==============================================================================

VITE_APP_NAME="${APP_NAME}"
